<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>WinScreen.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">io.maze.screens</a> &gt; <span class="el_source">WinScreen.java</span></div><h1>WinScreen.java</h1><pre class="source lang-java linenums">package io.maze.screens;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.math.Vector3;
import com.badlogic.gdx.utils.ScreenUtils;
import com.badlogic.gdx.utils.viewport.ExtendViewport;
import io.maze.core.Main;
import io.maze.core.LeaderboardManager;
/**
 * Game Over screen
 * has attributes for all the button images as well as its
 * own viewport.
 *
 * Will be displayed to the player when they escape the maze in time
 *
 * as a general rule, every screen should have its own viewport
 */
public class WinScreen implements Screen{

    private final Main game;
    private final GameScreen gameScreen;
    private final BitmapFont font;
    private final ExtendViewport viewport;
    private int correctAnswers;
    private int totalEvents;

    Texture newGameInactive, newGameActive;
    Texture exitInactive, exitActive;


    /**
     * Instantiates a new Win Screen.
     *
     * @param game the game is passed in every time we create a new
     *             screen in order to access the spritebatch
     * @param gameScreen passes in the Game Screen so that we can
     *                   access the score
     */
<span class="nc" id="L43">    public WinScreen(final Main game, final GameScreen gameScreen, final int correctAnswers, final int totalEvents ){</span>
<span class="nc" id="L44">        this.game = game;</span>
<span class="nc" id="L45">        this.font = new BitmapFont();</span>
<span class="nc" id="L46">        this.gameScreen = gameScreen;</span>
<span class="nc" id="L47">        this.correctAnswers = correctAnswers;</span>
<span class="nc" id="L48">        this.totalEvents = totalEvents;</span>
<span class="nc" id="L49">        font.setUseIntegerPositions(false);</span>
<span class="nc" id="L50">        font.getData().setScale(0.05f); //scaled down to fit achievements section</span>
<span class="nc" id="L51">        font.setColor(0, 255, 0, 1);</span>
<span class="nc" id="L52">        this.viewport = new ExtendViewport(16,9);</span>
<span class="nc" id="L53">        this.newGameActive = new Texture(&quot;menu/newGameActive.png&quot;);</span>
<span class="nc" id="L54">        this.newGameInactive = new Texture(&quot;menu/newGameInactive.png&quot;);</span>
<span class="nc" id="L55">        this.exitActive = new Texture(&quot;menu/exitActive.png&quot;);</span>
<span class="nc" id="L56">        this.exitInactive = new Texture(&quot;menu/exitInactive.png&quot;);</span>
        
<span class="nc" id="L58">        LeaderboardManager manager = new LeaderboardManager();</span>
<span class="nc" id="L59">        manager.addScore(&quot;Player&quot;, gameScreen.getScore());</span>
<span class="nc" id="L60">    }</span>


    @Override
    public void show() {

<span class="nc" id="L66">    }</span>
    /**
     * called when the screen renders itself
     * handles the drawing of all the menu's buttons
     * */
    @Override
    public void render(float delta) {
<span class="nc" id="L73">        ScreenUtils.clear(Color.BLACK);</span>

<span class="nc" id="L75">        viewport.apply();</span>
<span class="nc" id="L76">        game.getBatch().setProjectionMatrix(viewport.getCamera().combined);</span>

<span class="nc" id="L78">        game.getBatch().begin();</span>

<span class="nc" id="L80">        final float exitButtonWidth = 5f;</span>
<span class="nc" id="L81">        final float exitButtonHeight = 2f;</span>
<span class="nc" id="L82">        final float exitButtonX = 1f;</span>
<span class="nc" id="L83">        final float exitButtonY = 1f;</span>

<span class="nc" id="L85">        final float newGameButtonWidth = 5f;</span>
<span class="nc" id="L86">        final float newGameButtonHeight = 2f;</span>
<span class="nc" id="L87">        final float newGameButtonX = viewport.getWorldWidth() - 6f;</span>
<span class="nc" id="L88">        final float newGameButtonY = 1f;</span>


        //Convert world coordinates to screen coordinates
<span class="nc" id="L92">        Vector3 touchPos = new Vector3(Gdx.input.getX(), Gdx.input.getY(), 0);</span>
<span class="nc" id="L93">        viewport.getCamera().unproject(touchPos);</span>


        //boolean value that turn True if the user is hovering over the specified button
        //takes the mouse position and compares it to the place on the screen where the
        //button is drawn

<span class="nc bnc" id="L100" title="All 8 branches missed.">        boolean isHoveringExit = touchPos.x &lt; exitButtonX + exitButtonWidth &amp;&amp;</span>
            touchPos.x &gt; exitButtonX &amp;&amp;
            touchPos.y &lt; exitButtonY + exitButtonHeight &amp;&amp;
            touchPos.y &gt; exitButtonY;

<span class="nc bnc" id="L105" title="All 8 branches missed.">        boolean isHoveringNewGame = touchPos.x &lt; newGameButtonX + newGameButtonWidth &amp;&amp;</span>
            touchPos.x &gt; newGameButtonX &amp;&amp;
            touchPos.y &lt; newGameButtonY + newGameButtonHeight &amp;&amp;
            touchPos.y &gt; newGameButtonY;


        //if the user is not hovering exit:
<span class="nc bnc" id="L112" title="All 2 branches missed.">        if (!isHoveringExit){</span>
            //draw inactive sprite
<span class="nc" id="L114">            game.getBatch().draw(exitInactive, exitButtonX, exitButtonY,exitButtonWidth,exitButtonHeight);</span>
        }
        //if they are
        else{
            //draw the active sprite
<span class="nc" id="L119">            game.getBatch().draw(exitActive, exitButtonX, exitButtonY,exitButtonWidth,exitButtonHeight);</span>
        }

<span class="nc bnc" id="L122" title="All 2 branches missed.">        if (!isHoveringNewGame){</span>
<span class="nc" id="L123">            game.getBatch().draw(newGameInactive, newGameButtonX, newGameButtonY,newGameButtonWidth,newGameButtonHeight);</span>
        }
        else{
<span class="nc" id="L126">            game.getBatch().draw(newGameActive, newGameButtonX, newGameButtonY,newGameButtonWidth,newGameButtonHeight);</span>
        }

<span class="nc" id="L129">        font.draw(game.getBatch(), &quot;You Win!&quot;,6.5f,11f);</span>
<span class="nc" id="L130">        font.draw(game.getBatch(), &quot;Score = &quot; + this.gameScreen.getScore(),6f,9f);</span>
<span class="nc" id="L131">        font.draw(game.getBatch(), &quot;Your Achievements: &quot;, 4.9f, 7f);</span>
        //exam questions answered correctly
<span class="nc bnc" id="L133" title="All 2 branches missed.">        if (correctAnswers == 10) {</span>
            //let the player know they recevied bonus points
<span class="nc" id="L135">            font.draw(game.getBatch(), &quot;All questions answered correctly: +50 points&quot;, 0.5f, 5.3f);</span>
        } else {
<span class="nc" id="L137">            font.draw(game.getBatch(), &quot;Correct exam answers: &quot; + correctAnswers, 4.4f, 5.3f);</span>
        }
        //how many events interacted with
<span class="nc bnc" id="L140" title="All 2 branches missed.">        if (totalEvents == 11) {</span>
            //let the player know they recevied bonus points
<span class="nc" id="L142">            font.draw(game.getBatch(), &quot;All events interacted with: +20 points&quot;, 1.5f, 4.3f);</span>
        } else{
<span class="nc" id="L144">            font.draw(game.getBatch(), &quot;Events interacted with: &quot; + totalEvents, 4.6f, 4.3f);</span>
        }


        //if the user clicks:
<span class="nc bnc" id="L149" title="All 2 branches missed.">        if (Gdx.input.justTouched()) {</span>
            //on the back exit
<span class="nc bnc" id="L151" title="All 2 branches missed.">            if (isHoveringExit) {</span>
                //change the screen to the menu
<span class="nc" id="L153">                game.setScreen(new MainMenu(game));</span>
<span class="nc" id="L154">                dispose();</span>
            }
            //on the new game button
<span class="nc bnc" id="L157" title="All 2 branches missed.">            else if (isHoveringNewGame) {</span>
                //start a new game
<span class="nc" id="L159">                game.setScreen(new GameScreen(game));</span>
<span class="nc" id="L160">                dispose();</span>
            }
        }
<span class="nc" id="L163">        game.getBatch().end();</span>
<span class="nc" id="L164">    }</span>

    /**
     * called whenever the application is resized
     * updates how the viewport scales with screen pixels
     * to keep the aspect ratio consistent
     * */
    @Override
    public void resize(int i, int i1) {
<span class="nc" id="L173">        viewport.update(Gdx.graphics.getWidth(), Gdx.graphics.getHeight());</span>
        //set the camera centrally
<span class="nc" id="L175">        viewport.getCamera().position.set(viewport.getWorldWidth() / 2f, viewport.getWorldHeight() / 2f, 0);</span>
<span class="nc" id="L176">        viewport.getCamera().update();</span>
<span class="nc" id="L177">    }</span>

    @Override
    public void pause() {

<span class="nc" id="L182">    }</span>

    @Override
    public void resume() {

<span class="nc" id="L187">    }</span>

    @Override
    public void hide() {

<span class="nc" id="L192">    }</span>

    @Override
    public void dispose() {

<span class="nc" id="L197">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>